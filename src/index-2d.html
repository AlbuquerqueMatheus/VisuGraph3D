<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="VisuGraph - Interface 2D com sistemas de coordenadas, cores, modelo Phong e curvas."
    />
    <title>VisuGraph - Modo 2D</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <link rel="stylesheet" href="./styles-2d.css" />
  </head>

  <body>
    <div class="app-container">
      <!-- Sidebar -->
      <nav class="sidebar">
        <h1 class="sidebar-title">VisuGraph 2D</h1>
        <button id="btn-coordenadas" class="nav-btn">Coordenadas</button>
        <button id="color-system-btn" class="nav-btn">Sistemas de Cores</button>
        <button id="btn-phong" class="nav-btn">Modelo Phong</button>
        <button id="btn-curvas" class="nav-btn">Curvas</button>
        <button id="back-to-menu-2d" class="nav-btn">Voltar ao Menu</button>
      </nav>

      <!-- Main content -->
      <div class="content">
        <!-- Coordenadas -->
        <section id="coords-section" class="section coords-section hidden">
          <div class="teste">
            <div class="coords-controls">
              <div class="coords-header">
                <h2>Sistema de Coordenadas</h2>
              </div>
              <div class="coords-actions">
                <button id="add-point" class="coords-btn">
                  Adicionar Ponto
                </button>
                <button id="unir-pontos" class="coords-btn">Unir Pontos</button>
              </div>
              <h3>Modificar Coordenadas</h3>
              <div id="coords-modifier" class="coords-modifier"></div>
              <h3>Adicionar Primitivas</h3>
              <div class="coords-options">
                <select id="object-type" class="coords-select">
                  <option value="point">Ponto</option>
                  <option value="triangle">Triângulo</option>
                  <option value="rectangle">Retângulo</option>
                </select>
                <label class="coords-checkbox">
                  <input type="checkbox" id="toggle-coordinates" />
                  Mostrar Coordenadas Locais
                </label>
              </div>
              <div class="coords-helpers">
                <button id="btn-ajuda" class="coords-btn">Ajuda</button>
                <button id="reset-canvas" class="coords-btn">Reset</button>
              </div>
            </div>
            <div id="coords-canvas-container" class="coords-canvas"></div>
          </div>
        </section>

        <!-- Sistema de Cores -->
        <section id="color-system-section" class="section color-section hidden">
          <div class="color-header">
            <h2>Explore diferentes representações de cores</h2>
          </div>
          <div id="color-main" class="color-main">
            <!-- RGB -->
            <div id="rgb-panel" class="color-panel">
              <h3>Sistema RGB</h3>
              <div class="slider-container">
                <div class="sliders">
                  <div class="slider-group">
                    <label for="r-value">R:</label>
                    <input
                      id="r-value"
                      type="number"
                      min="0"
                      max="255"
                      value="255"
                    />
                    <input
                      id="r-slider"
                      type="range"
                      min="0"
                      max="255"
                      value="255"
                      class="slider-input"
                      style="background: linear-gradient(to right, black, red)"
                    />
                  </div>
                  <div class="slider-group">
                    <label for="g-value">G:</label>
                    <input
                      id="g-value"
                      type="number"
                      min="0"
                      max="255"
                      value="255"
                    />
                    <input
                      id="g-slider"
                      type="range"
                      min="0"
                      max="255"
                      value="255"
                      class="slider-input"
                      style="
                        background: linear-gradient(to right, black, green);
                      "
                    />
                  </div>
                  <div class="slider-group">
                    <label for="b-value">B:</label>
                    <input
                      id="b-value"
                      type="number"
                      min="0"
                      max="255"
                      value="255"
                    />
                    <input
                      id="b-slider"
                      type="range"
                      min="0"
                      max="255"
                      value="255"
                      class="slider-input"
                      style="background: linear-gradient(to right, black, blue)"
                    />
                  </div>
                </div>
                <div class="preview">
                  <div id="rgb-preview" class="color-preview"></div>
                  <div class="color-hex">
                    <h3>Valor HEX</h3>
                    <p id="hex-value-rgb">#FFFFFF</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- HSL -->
            <div id="hsl-panel" class="color-panel">
              <h3>Sistema HSL</h3>
              <div class="slider-container">
                <div class="sliders">
                  <div class="slider-group">
                    <label for="h-value-hsl">H:</label>
                    <input
                      id="h-value-hsl"
                      type="number"
                      min="0"
                      max="360"
                      value="0"
                    />
                    <input
                      id="h-slider-hsl"
                      type="range"
                      min="0"
                      max="360"
                      value="0"
                      class="slider-input"
                      style="
                        background: linear-gradient(
                          to right,
                          red,
                          yellow,
                          green,
                          cyan,
                          blue,
                          magenta,
                          red
                        );
                      "
                    />
                  </div>
                  <div class="slider-group">
                    <label for="s-value-hsl">S:</label>
                    <input
                      id="s-value-hsl"
                      type="number"
                      min="0"
                      max="100"
                      value="100"
                    />
                    <input
                      id="s-slider-hsl"
                      type="range"
                      min="0"
                      max="100"
                      value="100"
                      class="slider-input"
                      style="background: linear-gradient(to right, gray, white)"
                    />
                  </div>
                  <div class="slider-group">
                    <label for="l-value-hsl">L:</label>
                    <input
                      id="l-value-hsl"
                      type="number"
                      min="0"
                      max="100"
                      value="100"
                    />
                    <input
                      id="l-slider-hsl"
                      type="range"
                      min="0"
                      max="100"
                      value="100"
                      class="slider-input"
                      style="
                        background: linear-gradient(to right, black, white);
                      "
                    />
                  </div>
                </div>
                <div class="preview">
                  <div id="hsl-preview" class="color-preview"></div>
                  <div class="color-hex">
                    <h3>Valor HEX</h3>
                    <p id="hex-value-hsl">#FFFFFF</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- HSV -->
            <div id="hsv-panel" class="color-panel">
              <h3>Sistema HSV</h3>
              <div class="slider-container">
                <div class="sliders">
                  <div class="slider-group">
                    <label for="h-value-hsv">H:</label>
                    <input
                      id="h-value-hsv"
                      type="number"
                      min="0"
                      max="360"
                      value="0"
                    />
                    <input
                      id="h-slider-hsv"
                      type="range"
                      min="0"
                      max="360"
                      value="0"
                      class="slider-input"
                      style="
                        background: linear-gradient(
                          to right,
                          red,
                          yellow,
                          green,
                          cyan,
                          blue,
                          magenta,
                          red
                        );
                      "
                    />
                  </div>
                  <div class="slider-group">
                    <label for="s-value-hsv">S:</label>
                    <input
                      id="s-value-hsv"
                      type="number"
                      min="0"
                      max="100"
                      value="0"
                    />
                    <input
                      id="s-slider-hsv"
                      type="range"
                      min="0"
                      max="100"
                      value="0"
                      class="slider-input"
                      style="background: linear-gradient(to right, gray, white)"
                    />
                  </div>
                  <div class="slider-group">
                    <label for="v-value-hsv">V:</label>
                    <input
                      id="v-value-hsv"
                      type="number"
                      min="0"
                      max="100"
                      value="100"
                    />
                    <input
                      id="v-slider-hsv"
                      type="range"
                      min="0"
                      max="100"
                      value="100"
                      class="slider-input"
                      style="
                        background: linear-gradient(to right, black, white);
                      "
                    />
                  </div>
                </div>
                <div class="preview">
                  <div id="hsv-preview" class="color-preview"></div>
                  <div class="color-hex">
                    <h3>Valor HEX</h3>
                    <p id="hex-value-hsv">#FFFFFF</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Controles extras -->
            <div id="color-controls" class="color-controls">
              <div class="image-upload">
                <label for="image-upload">Carregue uma imagem:</label>
                <input type="file" id="image-upload" accept="image/*" />
              </div>
              <div id="image-container" class="image-container">
                <canvas id="image-canvas" class="hidden"></canvas>
                <img id="uploaded-image" alt="Imagem carregada" />
              </div>
              <div id="color-palette" class="color-palette">
                <h3>Paleta de Cores Predominante</h3>
                <div id="colors"></div>
              </div>
              <div id="help-button-container">
                <button id="btn-cores" class="btn-help">
                  Ajuda sobre Sistemas de Cores
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Modelo Phong -->
        <section id="phong-section" class="section phong-section hidden">
          <div class="phong-header">
            <h2>Explorando o Modelo Phong</h2>
            <p>
              Ajuste os parâmetros abaixo para explorar os efeitos do modelo
              Phong em uma superfície 3D.
            </p>
          </div>
          <div id="phong-main" class="phong-main">
            <div class="phong-controls">
              <div class="phong-geometry-group">
                <label for="geometry-selector">Geometria:</label>
                <select id="geometry-selector">
                  <option value="sphere">Esfera</option>
                  <option value="torus">Toroide</option>
                </select>
              </div>
              <h3 class="phong-title">Intensidade da Luz</h3>
              <div class="phong-slider-group">
                <span class="slider-label">La:</span>
                <input
                  type="range"
                  id="ambient-light"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="ambient-intensity-value" class="slider-value"
                  >0.5</span
                >
              </div>
              <div class="phong-slider-group">
                <span class="slider-label">Ld:</span>
                <input
                  type="range"
                  id="diffuse-light"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="diffuse-intensity-value" class="slider-value"
                  >0.5</span
                >
              </div>
              <div class="phong-slider-group">
                <span class="slider-label">Ls:</span>
                <input
                  type="range"
                  id="specular-light"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="specular-intensity-value" class="slider-value"
                  >0.5</span
                >
              </div>
              <h3 class="phong-title">Propriedades do Material</h3>
              <div class="phong-slider-group">
                <span class="slider-label">Ka:</span>
                <input
                  type="range"
                  id="ambient-material"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="ka-value" class="slider-value">0.5</span>
              </div>
              <div class="phong-slider-group">
                <span class="slider-label">Kd:</span>
                <input
                  type="range"
                  id="diffuse-material"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="kd-value" class="slider-value">0.5</span>
              </div>
              <div class="phong-slider-group">
                <span class="slider-label">Ks:</span>
                <input
                  type="range"
                  id="specular-material"
                  class="slider-input"
                  min="0"
                  max="1"
                  step="0.1"
                  value="0.5"
                />
                <span id="ks-value" class="slider-value">0.5</span>
              </div>
              <h3 class="phong-title">Shininess</h3>
              <div class="phong-slider-group">
                <span class="slider-label">n:</span>
                <input
                  type="range"
                  id="shininess"
                  class="slider-input"
                  min="1"
                  max="100"
                  step="1"
                  value="10"
                />
                <span id="shininess-value" class="slider-value">10</span>
              </div>
            </div>
            <div id="phong-viewer" class="phong-viewer"></div>
            <div>
              <canvas
                id="phong-formula-canvas"
                class="phong-formula"
                width="400"
                height="150"
              ></canvas>
              <div class="button-group">
                <button id="btn-phong-explain" class="btn-explain">
                  Explicações
                </button>
              </div>
            </div>
          </div>
        </section>

        <!-- Curvas -->
        <section id="curves-section" class="section hidden">
          <div class="header-buttons">
            <button id="btn-info" class="btn-info">Ajuda</button>
            <button id="btn-formula" class="btn-info">Fórmula</button>
          </div>
          <h2 style="text-align: center">Sistema de Curvas Bézier Didático</h2>
          <div class="controls">
            <label for="bezier-degree">Grau:</label>
            <select id="bezier-degree">
              <option value="2">2</option>
              <option value="3" selected>3</option>
              <option value="4">4</option>
            </select>
            <label for="t-slider">t: <span id="t-value">0.00</span></label>
            <input
              type="range"
              id="t-slider"
              min="0"
              max="1"
              step="0.01"
              value="0"
            />
            <button id="play-btn">Iniciar Animação</button>
            <label
              ><input type="checkbox" id="show-polygon" checked /> Mostrar
              Polígono</label
            >
            <label
              ><input type="checkbox" id="show-decasteljau" /> Mostrar De
              Casteljau</label
            >
          </div>
          <canvas id="bezier-canvas" width="800" height="400"></canvas>
          <section id="properties">
            <h2>Propriedades da Curva Bézier</h2>
            <ul>
              <li>P0 e Pn são ponto inicial e final;</li>
              <li>Curva sempre dentro do invólucro convexo;</li>
              <li>Tangentes definidas pelos pontos adjacentes;</li>
              <li>Σ C(n,i)(1−t)ⁿ⁻ⁱ tⁱ = 1 para todo t ∈ [0,1];</li>
            </ul>
          </section>
        </section>
      </div>
    </div>

    <!-- Modais -->

    <div id="modal-info" class="modal hidden">
      <div class="modal-content">
        <h2>Como usar</h2>
        <p>Clique no canvas para adicionar até n+1 pontos de controle.</p>
        <p>Arraste os pontos para ajustar a curva em tempo real.</p>
        <p>
          Use o slider de t para ver posições intermediárias ou inicie a
          animação.
        </p>
        <button class="close-btn">Fechar</button>
      </div>
    </div>
    <div id="modal-formula" class="modal hidden">
      <div class="modal-content">
        <h2>Fórmula Bézier</h2>
        <p id="formula-description">
          B(t) = Σ<sub>i=0</sub><sup>n</sup> C(n,i) (1−t)ⁿ⁻ⁱ tⁱ P<sub>i</sub>
        </p>
        <button class="close-btn">Fechar</button>
      </div>
    </div>

    <div
      id="modal-cores"
      class="modal modal-cores hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-cores-title"
    >
      <div class="modal-content">
        <h2 id="modal-cores-title">Sistemas de Cores</h2>
        <p><strong>RGB:</strong> valores 0–255 para R, G, B.</p>
        <p><strong>HSL:</strong> Hue 0–360°, Saturation/Lightness 0–100%.</p>
        <p><strong>HSV:</strong> Hue 0–360°, Saturation/Value 0–100%.</p>
        <button class="close-btn">Fechar</button>
      </div>
    </div>

    <div
      id="modal-help"
      class="modal modal-help hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-help-title"
    >
      <div class="modal-content">
        <h2 id="modal-help-title">Ajuda Coordenadas</h2>
        <p><strong>Globais:</strong> origem no canto superior esquerdo.</p>
        <p><strong>Locais:</strong> origem no centro do canvas.</p>
        <p>Use os botões para adicionar, unir ou resetar.</p>
        <button class="close-btn">Fechar</button>
      </div>
    </div>

    <div
      id="modal-phong"
      class="modal modal-phong hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-phong-title"
    >
      <div class="modal-content">
        <h2 id="modal-phong-title">Modelo Phong</h2>
        <p><strong>La:</strong> luz ambiente.</p>
        <p><strong>Ld:</strong> luz difusa (n·l).</p>
        <p><strong>Ls:</strong> luz especular (r·v)<sup>n</sup>.</p>
        <p><strong>Ka,Kd,Ks:</strong> coeficientes.</p>
        <button class="close-btn">Fechar</button>
      </div>
    </div>

    <!-- Scripts -->
    <script>
      // alterna visibilidade das seções
      const sections = document.querySelectorAll(".section");
      const navBtns = document.querySelectorAll(".nav-btn");
      navBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          sections.forEach((s) => s.classList.add("hidden"));
          document
            .getElementById(
              btn.id === "color-system-btn"
                ? "color-system-section"
                : btn.id === "btn-phong"
                ? "phong-section"
                : btn.id === "btn-curvas"
                ? "curves-section"
                : "coords-section"
            )
            .classList.remove("hidden");
          navBtns.forEach((b) => b.classList.remove("active"));
          btn.classList.add("active");
        });
      });

      // modais
      document.querySelectorAll(".modal .close-btn").forEach((b) => {
        b.addEventListener("click", () =>
          b.closest(".modal").classList.add("hidden")
        );
      });
      document.getElementById("btn-cores").addEventListener("click", () => {
        document.getElementById("modal-cores").classList.remove("hidden");
      });
      document.getElementById("btn-ajuda").addEventListener("click", () => {
        document.getElementById("modal-help").classList.remove("hidden");
      });
      document
        .getElementById("btn-phong-explain")
        .addEventListener("click", () => {
          document.getElementById("modal-phong").classList.remove("hidden");
        });

      document.getElementById("back-to-menu-2d").onclick = () =>
        (window.location.href = "./index.html");
    </script>
    <script src="coordenadas.js"></script>
    <script src="cores.js"></script>
    <script type="module" src="phong.js"></script>
    <script src="curvas.js"></script>
  </body>
</html>
